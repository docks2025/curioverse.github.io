<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CurioVerse - Learn Fun Facts!</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Fredoka+One&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f0f4f8;
        }
        .header-title {
            font-family: 'Fredoka One', cursive;
            color: #3b82f6;
        }
        .category-card-link { /* Changed from .category-card to be an anchor */
            display: block;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border-left-width: 6px;
            background-color: white;
        }
        .category-card-link:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .progress-bar-bg {
            background-color: #e5e7eb;
        }
        .progress-bar-fill {
            background-color: #3b82f6;
            transition: width 0.5s ease-in-out;
        }
        .badge {
            font-family: 'Fredoka One', cursive;
            animation: badge-appear 0.5s ease-out;
        }
        @keyframes badge-appear {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .points-display {
            animation: points-update 0.3s ease-in-out;
        }
        @keyframes points-update {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); color: #22c55e; }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body class="antialiased text-slate-700">

    <header class="bg-white shadow-md sticky top-0 z-40 py-4">
        <div class="container mx-auto px-4 sm:px-6 flex justify-between items-center">
            <h1 class="header-title text-3xl md:text-4xl">CurioVerse</h1>
            <div class="text-right">
                <p class="text-sm text-slate-500">Your Score:</p>
                <p id="user-points" class="text-2xl font-bold text-amber-500 points-display">0 pts</p>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 sm:px-6 py-8">
        <section class="mb-12 text-center">
            <h2 class="text-3xl md:text-4xl font-bold text-slate-800 mb-3">Unlock the Mysteries of... Everything!</h2>
            <p class="text-lg text-slate-600 max-w-2xl mx-auto">Tap a category, pick a question, and get ready for some mind-bending fun facts. Let the learning adventure begin!</p>
        </section>

        <section id="categories-section" class="mb-12">
            <h3 class="text-2xl font-bold text-slate-700 mb-6">Choose Your Adventure:</h3>
            <div id="categories-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                </div>
        </section>
        
        <section id="badges-section" class="mt-12">
            <h3 class="text-2xl font-bold text-slate-700 mb-4 text-center">Your Awesome Badges!</h3>
            <div id="badges-container" class="flex flex-wrap gap-4 justify-center items-center min-h-[50px]">
                <p id="no-badges-message" class="text-slate-500">No badges unlocked yet. Keep learning!</p>
                </div>
        </section>
    </main>

    <script>
        // --- Common Data (Should be in a shared JS file in a real multi-page app) ---
        const categoriesData = [
            {
                id: "body", title: "üß† Why Does My Body Do That?", description: "Explore weird, funny, and fascinating body quirks.", color: "border-red-400", icon: "ü§∏", badgeIcon: "üèÜ", badgeName: "Body Whiz",
                questions: [ // Questions are still defined here for progress calculation on main page
                    { id: "q1-body", text: "Why do we say 'bless you' when someone sneezes?", audioUrl: "#", funFact: "The custom of saying 'bless you' dates back to ancient times when a sneeze was thought to expel evil spirits or be a sign of impending illness. Pope Gregory the Great in 600 AD even decreed it during a plague!", points: 10 },
                    { id: "q2-body", text: "Why do onions make us cry?", audioUrl: "#", funFact: "Onions release a chemical called syn-propanethial-S-oxide. When it hits your eyes, it reacts with the water to form sulfuric acid. Ouch!", points: 10 },
                    { id: "q3-body", text: "Why do we get goosebumps?", audioUrl: "#", funFact: "Goosebumps are a leftover reflex from our hairy ancestors. The tiny muscles at the base of each hair contract, making hairs stand up to trap more air for warmth or to appear larger to predators.", points: 10 },
                    { id: "q4-body", text: "Why do hiccups happen, and how do you actually stop them?", audioUrl: "#", funFact: "Hiccups are involuntary spasms of your diaphragm. Holding your breath or drinking water upside down can sometimes interrupt the nerve signals causing the spasms!", points: 15 },
                    { id: "q5-body", text: "Why do your fingers wrinkle in water?", audioUrl: "#", funFact: "It's not just water absorption! Scientists believe wrinkled fingers improve our grip on wet objects, an evolutionary trait like tire treads for better traction.", points: 10 },
                    { id: "q6-body", text: "Why do we yawn ‚Äî and why is it contagious?", audioUrl: "#", funFact: "Yawning might help cool the brain! Contagious yawning is linked to empathy and social bonding ‚Äì you're more likely to 'catch' a yawn from someone you're close to.", points: 10 },
                    { id: "q7-body", text: "Why does your stomach growl when you're hungry?", audioUrl: "#", funFact: "That 'growl' (borborygmus) is the sound of muscles in your stomach and intestines contracting to push food, liquid, and gas through. It happens all the time, but it's louder when your stomach is empty!", points: 10 },
                    { id: "q8-body", text: "Can you tickle yourself? Why not?", audioUrl: "#", funFact: "Probably not! Your brain anticipates your own touch and cancels out the ticklish sensation. The surprise element is key for tickling!", points: 15 },
                    { id: "q9-body", text: "Why do we sometimes get a song stuck in our head?", audioUrl: "#", funFact: "These 'earworms' often happen with catchy, repetitive tunes. Your brain might be trying to 'complete' an unfinished musical pattern or it's just a sign of an overactive auditory cortex.", points: 10 }
                ]
            },
            {
                id: "nature", title: "üåç Nature‚Äôs Little Mysteries", description: "Answers to quirky nature-related questions.", color: "border-green-400", icon: "üå≥", badgeIcon: "üèÖ", badgeName: "Nature Navigator",
                questions: [
                    { id: "q1-nature", text: "Why do flamingos stand on one leg?", audioUrl: "#", funFact: "It's likely to conserve body heat! Standing on two legs in water would lose more heat. They also might do it to reduce muscle fatigue.", points: 10 },
                    { id: "q2-nature", text: "Do ants sleep?", audioUrl: "#", funFact: "Yes, but not like we do! Ants take many short power naps throughout the day. Queen ants nap for about 9 minutes, up to 90 times a day!", points: 10 },
                    { id: "q3-nature", text: "Why do cats purr?", audioUrl: "#", funFact: "Cats purr for many reasons: when they're happy, stressed, hungry, or even healing. The frequency of a cat's purr (25-150 Hz) can promote bone growth and repair!", points: 15 },
                ]
            },
            {
                id: "science", title: "‚ö° Science in a Snap!", description: "Quick bursts of science to blow your mind.", color: "border-yellow-400", icon: "üí°", badgeIcon: "üî¨", badgeName: "Science Superstar",
                questions: [
                    { id: "q1-science", text: "Why is the sky blue but sunsets orange?", audioUrl: "#", funFact: "It's all about how sunlight scatters! Blue light scatters more than other colors because it travels as shorter, smaller waves. At sunset, sunlight passes through more atmosphere, scattering away the blue light and leaving reds and oranges.", points: 10 },
                    { id: "q2-science", text: "What causes static electricity?", audioUrl: "#", funFact: "It's an imbalance of electric charges within or on the surface of a material. Rubbing two objects together can transfer electrons, creating the zap!", points: 10 },
                ]
            },
            {
                id: "tech", title: "üì± Tech Explained Like You're 5", description: "Make modern life‚Äôs oddities make sense.", color: "border-purple-400", icon: "ü§ñ", badgeIcon: "‚öôÔ∏è", badgeName: "Tech Titan",
                questions: [
                    { id: "q1-tech", text: "How do QR codes actually work?", audioUrl: "#", funFact: "QR codes store information in a pattern of black and white squares. A scanner (like your phone camera) reads this pattern and decodes it into data, often a website link or text.", points: 10 },
                    { id: "q2-tech", text: "Why does your voice sound weird on a recording?", audioUrl: "#", funFact: "When you speak, you hear your voice through air conduction (sound waves entering your ear canal) AND bone conduction (vibrations in your skull). Recordings only capture air conduction, so it sounds different!", points: 15 },
                ]
            }
        ];

        let userData = {
            totalPoints: 0,
            unlockedBadges: [],
            listenedQuestions: {}
        };

        // --- DOM Elements ---
        const categoriesGrid = document.getElementById('categories-grid');
        const userPointsDisplay = document.getElementById('user-points');
        const badgesContainer = document.getElementById('badges-container');
        const noBadgesMessage = document.getElementById('no-badges-message');

        // --- Gamification & UI Update Functions ---
        function updatePointsDisplay() {
            userPointsDisplay.textContent = `${userData.totalPoints} pts`;
            // Animation is handled by CSS
        }

        function displayBadges() {
            badgesContainer.innerHTML = ''; 
            if (userData.unlockedBadges.length === 0) {
                noBadgesMessage.classList.remove('hidden');
            } else {
                noBadgesMessage.classList.add('hidden');
                userData.unlockedBadges.forEach(badge => {
                    const badgeElement = document.createElement('div');
                    badgeElement.classList.add('badge', 'p-3', 'rounded-lg', 'text-center', 'shadow-md', 'bg-gradient-to-br', 'from-amber-300', 'to-orange-400', 'text-slate-800');
                    badgeElement.innerHTML = `
                        <div class="text-4xl">${badge.badgeIcon}</div>
                        <div class="text-sm font-semibold mt-1">${badge.badgeName}</div>
                    `;
                    badgesContainer.appendChild(badgeElement);
                });
            }
        }

        // --- Data Persistence (LocalStorage) ---
        function loadUserData() {
            const savedData = localStorage.getItem('curioVerseUserData');
            if (savedData) {
                userData = JSON.parse(savedData);
            }
        }
        // Note: saveUserData will be called from category_page.html when progress is made.

        // --- Display Functions ---
        function displayCategories() {
            categoriesGrid.innerHTML = '';
            categoriesData.forEach(category => {
                const cardLink = document.createElement('a'); // Changed to an anchor tag
                cardLink.href = `category_page.html?id=${category.id}`; // Link to category page
                cardLink.classList.add('category-card-link', 'p-6', 'rounded-xl', 'shadow-lg', category.color);
                
                // Calculate progress for this category
                const listenedInCategory = category.questions.filter(q => userData.listenedQuestions[q.id]).length;
                const totalInCategory = category.questions.length;
                const progressPercentage = totalInCategory > 0 ? (listenedInCategory / totalInCategory) * 100 : 0;

                cardLink.innerHTML = `
                    <div class="flex items-center mb-3">
                        <span class="text-4xl mr-4">${category.icon}</span>
                        <h4 class="text-xl font-bold text-slate-800">${category.title}</h4>
                    </div>
                    <p class="text-slate-600 text-sm mb-4">${category.description}</p>
                    <div class="progress-bar-bg w-full h-2.5 rounded-full overflow-hidden mt-auto">
                        <div class="progress-bar-fill h-full rounded-full" style="width: ${progressPercentage}%;"></div>
                    </div>
                `;
                categoriesGrid.appendChild(cardLink);
            });
        }

        // --- Initial Load for index.html ---
        document.addEventListener('DOMContentLoaded', () => {
            loadUserData();
            displayCategories();
            updatePointsDisplay();
            displayBadges();
        });
    </script>
</body>
</html>
