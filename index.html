<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CurioVerse - Learn Fun Facts!</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Fredoka+One&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f0f4f8;
        }
        .header-title {
            font-family: 'Fredoka One', cursive;
            color: #3b82f6;
        }
        .nav-link { /* Standard style for other potential nav links */
            @apply text-slate-600 hover:text-blue-500 font-semibold px-3 py-2 rounded-md text-sm transition-colors;
        }
        .nav-link-quizzes { /* Enhanced style for the Quizzes link */
            @apply bg-gradient-to-r from-green-400 to-blue-500 hover:from-green-500 hover:to-blue-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transform transition-all duration-150 ease-in-out hover:scale-105 text-sm inline-flex items-center;
        }
        .nav-link.active { /* Active state for general nav links, if any were left or added */
            @apply text-blue-600 bg-blue-100;
        }
        .category-card-link {
            display: block;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border-left-width: 6px;
            background-color: white;
        }
        .category-card-link:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .progress-bar-bg {
            background-color: #e5e7eb;
        }
        .progress-bar-fill {
            background-color: #3b82f6;
            transition: width 0.5s ease-in-out;
        }
        .badge {
            font-family: 'Fredoka One', cursive;
            animation: badge-appear 0.5s ease-out;
        }
        @keyframes badge-appear {
            0% { transform: scale(0.5); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .points-display {
            animation: points-update 0.3s ease-in-out;
        }
        @keyframes points-update {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); color: #22c55e; }
            100% { transform: scale(1); }
        }
        .quiz-cta-button {
            @apply bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-4 px-8 rounded-xl shadow-lg transform transition-all duration-300 ease-in-out hover:scale-105 text-lg inline-flex items-center;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.35); /* Added text shadow for better visibility */
        }
    </style>
</head>
<body class="antialiased text-slate-700">

    <header class="bg-white shadow-md sticky top-0 z-40 py-3">
        <div class="container mx-auto px-4 sm:px-6 flex justify-between items-center">
            <a href="index.html" class="header-title text-3xl md:text-4xl">CurioVerse</a>
            <nav class="flex items-center space-x-2 md:space-x-4">
                <a href="quizzes_page.html" class="nav-link-quizzes">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" />
                    </svg>
                    Quizzes
                </a>
            </nav>
            <div class="text-right">
                <p class="text-sm text-slate-500">Your Score:</p>
                <p id="user-points" class="text-2xl font-bold text-amber-500 points-display">0 pts</p>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 sm:px-6 py-8">
        <section class="mb-12 text-center">
            <h2 class="text-3xl md:text-4xl font-bold text-slate-800 mb-3">Unlock the Mysteries of... Everything!</h2>
            <p class="text-lg text-slate-600 max-w-2xl mx-auto">Tap a category, pick a question, and get ready for some mind-bending fun facts. Let the learning adventure begin!</p>
        </section>

        <section id="categories-section" class="mb-12">
            <h3 class="text-2xl font-bold text-slate-700 mb-6">Choose Your Learning Adventure:</h3>
            <div id="categories-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                </div>
        </section>

        <section id="quiz-cta-section" class="my-16 py-12 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl shadow-2xl text-center">
            <h2 class="text-4xl font-bold text-white mb-4">Ready to Test Your Knowledge?</h2>
            <p class="text-lg text-blue-100 mb-8 max-w-xl mx-auto">Challenge yourself with fun quizzes on everything you've learned and see how much of a Curio-Master you've become!</p>
            <a href="quizzes_page.html" class="quiz-cta-button">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 mr-3" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v1.268l4.063 2.285a1 1 0 01.437.894V13a1 1 0 01-1.447.894L11 11.568V14a1 1 0 01-.7.954l-5 2A1 1 0 014 16V4.568l4.063-2.285a1 1 0 01.437.894L11 1.268V2a1 1 0 01.3-.754zM6 5.5L10 8v2.432L6 7.715V5.5zm6 0v2.215L14 10.432V8L10 5.5v2.215L12 9V5.5z" clip-rule="evenodd" />
                </svg>
                Go to Quizzes!
            </a>
        </section>
        
        <section id="badges-section" class="mt-12">
            <h3 class="text-2xl font-bold text-slate-700 mb-4 text-center">Your Awesome Badges!</h3>
            <div id="badges-container" class="flex flex-wrap gap-4 justify-center items-center min-h-[50px]">
                <p id="no-badges-message" class="text-slate-500">No badges unlocked yet. Keep learning!</p>
                </div>
        </section>
    </main>

    <script>
        // --- Common Data ---
        const categoriesData = [
            {
                id: "body", title: "üß† Why Does My Body Do That?", description: "Explore weird, funny, and fascinating body quirks.", color: "border-red-400", icon: "ü§∏", badgeIcon: "üèÜ", badgeName: "Body Whiz",
                questions: [ 
                    { id: "q1-body", text: "Why do we say 'bless you' when someone sneezes?", audioUrl: "#", funFact: "The custom of saying 'bless you' dates back to ancient times when a sneeze was thought to expel evil spirits or be a sign of impending illness. Pope Gregory the Great in 600 AD even decreed it during a plague!", points: 10 },
                    { id: "q2-body", text: "Why do onions make us cry?", audioUrl: "#", funFact: "Onions release a chemical called syn-propanethial-S-oxide. When it hits your eyes, it reacts with the water to form sulfuric acid. Ouch!", points: 10 },
                    { id: "q3-body", text: "Why do we get goosebumps?", audioUrl: "#", funFact: "Goosebumps are a leftover reflex from our hairy ancestors. The tiny muscles at the base of each hair contract, making hairs stand up to trap more air for warmth or to appear larger to predators.", points: 10 },
                    { id: "q4-body", text: "Why do hiccups happen, and how do you actually stop them?", audioUrl: "#", funFact: "Hiccups are involuntary spasms of your diaphragm. Holding your breath or drinking water upside down can sometimes interrupt the nerve signals causing the spasms!", points: 15 },
                    { id: "q5-body", text: "Why do your fingers wrinkle in water?", audioUrl: "#", funFact: "It's not just water absorption! Scientists believe wrinkled fingers improve our grip on wet objects, an evolutionary trait like tire treads for better traction.", points: 10 },
                    { id: "q6-body", text: "Why do we yawn ‚Äî and why is it contagious?", audioUrl: "#", funFact: "Yawning might help cool the brain! Contagious yawning is linked to empathy and social bonding ‚Äì you're more likely to 'catch' a yawn from someone you're close to.", points: 10 },
                    { id: "q7-body", text: "Why does your stomach growl when you're hungry?", audioUrl: "#", funFact: "That 'growl' (borborygmus) is the sound of muscles in your stomach and intestines contracting to push food, liquid, and gas through. It happens all the time, but it's louder when your stomach is empty!", points: 10 },
                    { id: "q8-body", text: "Can you tickle yourself? Why not?", audioUrl: "#", funFact: "Probably not! Your brain anticipates your own touch and cancels out the ticklish sensation. The surprise element is key for tickling!", points: 15 },
                    { id: "q9-body", text: "Why do we sometimes get a song stuck in our head?", audioUrl: "#", funFact: "These 'earworms' often happen with catchy, repetitive tunes. Your brain might be trying to 'complete' an unfinished musical pattern or it's just a sign of an overactive auditory cortex.", points: 10 }
                ]
            },
            {
                id: "nature", title: "üåç Nature‚Äôs Little Mysteries", description: "Answers to quirky nature-related questions.", color: "border-green-400", icon: "üå≥", badgeIcon: "üèÖ", badgeName: "Nature Navigator",
                questions: [ /* ... questions ... */ ]
            },
            {
                id: "science", title: "‚ö° Science in a Snap!", description: "Quick bursts of science to blow your mind.", color: "border-yellow-400", icon: "üí°", badgeIcon: "üî¨", badgeName: "Science Superstar",
                questions: [ /* ... questions ... */ ]
            },
            {
                id: "tech", title: "üì± Tech Explained Like You're 5", description: "Make modern life‚Äôs oddities make sense.", color: "border-purple-400", icon: "ü§ñ", badgeIcon: "‚öôÔ∏è", badgeName: "Tech Titan",
                questions: [ /* ... questions ... */ ]
            }
        ]; 

        let userData = {
            totalPoints: 0,
            unlockedBadges: [],
            listenedQuestions: {}
        };

        // --- DOM Elements ---
        const categoriesGrid = document.getElementById('categories-grid');
        const userPointsDisplay = document.getElementById('user-points');
        const badgesContainer = document.getElementById('badges-container');
        const noBadgesMessage = document.getElementById('no-badges-message');

        // --- Gamification & UI Update Functions ---
        function updatePointsDisplay() {
            userPointsDisplay.textContent = `${userData.totalPoints} pts`;
        }

        function displayBadges() {
            badgesContainer.innerHTML = ''; 
            if (userData.unlockedBadges.length === 0) {
                noBadgesMessage.classList.remove('hidden');
            } else {
                noBadgesMessage.classList.add('hidden');
                userData.unlockedBadges.forEach(badge => {
                    const badgeElement = document.createElement('div');
                    badgeElement.classList.add('badge', 'p-3', 'rounded-lg', 'text-center', 'shadow-md', 'bg-gradient-to-br', 'from-amber-300', 'to-orange-400', 'text-slate-800');
                    badgeElement.innerHTML = `
                        <div class="text-4xl">${badge.badgeIcon}</div>
                        <div class="text-sm font-semibold mt-1">${badge.badgeName}</div>
                    `;
                    badgesContainer.appendChild(badgeElement);
                });
            }
        }

        // --- Data Persistence (LocalStorage) ---
        function loadUserData() {
            const savedData = localStorage.getItem('curioVerseUserData');
            if (savedData) {
                userData = JSON.parse(savedData);
            }
        }
        
        // --- Display Functions ---
        function displayCategories() {
            // Ensure categoriesGrid exists before trying to modify its innerHTML
            if (!categoriesGrid) {
                console.error("Error: categoriesGrid element not found in the DOM.");
                return;
            }
            categoriesGrid.innerHTML = ''; // Clear existing cards
            categoriesData.forEach(category => {
                const cardLink = document.createElement('a'); 
                cardLink.href = `category_page.html?id=${category.id}`; 
                cardLink.classList.add('category-card-link', 'p-6', 'rounded-xl', 'shadow-lg', category.color);
                
                const listenedInCategory = category.questions.filter(q => userData.listenedQuestions[q.id]).length;
                const totalInCategory = category.questions.length;
                const progressPercentage = totalInCategory > 0 ? (listenedInCategory / totalInCategory) * 100 : 0;

                cardLink.innerHTML = `
                    <div class="flex items-center mb-3">
                        <span class="text-4xl mr-4">${category.icon}</span>
                        <h4 class="text-xl font-bold text-slate-800">${category.title}</h4>
                    </div>
                    <p class="text-slate-600 text-sm mb-4">${category.description}</p>
                    <div class="progress-bar-bg w-full h-2.5 rounded-full overflow-hidden mt-auto">
                        <div class="progress-bar-fill h-full rounded-full" style="width: ${progressPercentage}%;"></div>
                    </div>
                `;
                categoriesGrid.appendChild(cardLink);
            });
        }

        // --- Initial Load for index.html ---
        document.addEventListener('DOMContentLoaded', () => {
            loadUserData();
            displayCategories();
            updatePointsDisplay();
            displayBadges();
        });
    </script>
</body>
</html>
